# 算法技巧之位运算

## 几个有趣的位操作

1. 利用或操作 `|` 和空格将英文字符转换为小写

   ~~~java
   ('a' | ' ') = 'a'
   ('A' | ' ') = 'a'
   ~~~

2. 利用与操作 `&` 和下划线将英文字符转换为大写

   ~~~java
   ('b' & '_') = 'B'
   ('B' & '_') = 'B'
   ~~~

3. 利用异或操作 `^` 和空格进行英文字符大小写互换

   ~~~java
   ('d' ^ ' ') = 'D'
   ('D' ^ ' ') = 'd'
   ~~~

4. 判断两个数是否异号

   ~~~java
   int x = -1, y = 2;
   bool f = ((x ^ y) < 0); // true
   
   int x = 3, y = 2;
   bool f = ((x ^ y) < 0); // false
   ~~~

## 常用操作 n & (n-1)

​	作用：消除数字 n 的二进制表示中的最后一个 1

​	![位操作图解](D:\FileBrowser\mdImage\位操作图解.png)

1. 计算汉明权重（无符号整数的二进制中1的个数）

   思路：通过循环不断消除最后一个1，同时进行计数，直到数为0为止

   ~~~java
   int hammingWeight(int n) {
       int res = 0;
       while (n != 0) {
           n = n & (n - 1);
           res++;
       }
       return res;
   }
   ~~~

2. 判断一个数是不是 2 的指数

   思路：2的指数必定二进制位中只有一个1，通过消除一个1，判断是否为0即可

   ~~~python
   bool isPowerOfTwo(int n) {
       if (n <= 0) return false;
       return (n & (n - 1)) == 0;
   }
   ~~~


## 常用操作 n &(-n)

作用：获取 n 二进制的最后一位