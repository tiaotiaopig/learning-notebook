# 加权平均计算态势

## 评价指标

![image-20210811155321288](https://i.loli.net/2021/08/11/RPsazy9vAm1lQEG.png)

## 加权平均

假如，我们拿到一个边的数据（带宽：80M，时延：30ms，丢包率：0.58%，30dB）

> $$
> score = curr/max * wight
> $$

* 对于带宽：curr / max
* 对于时延，1 - x/200
* 丢包率，1 - p
* 信噪比，p / 100

> 80/100 * 0.3 + (1 - 30 / 200) * 0.3 + (1 - 0.0058) * 0.3 + 30 * 0.1=0.825

于是这条边的打分就是0.825

## 拓扑权重

计算一条边 **a** 对于整个网络的权重，对于网络中任意两个节点 **s** 和 **d**,总的路径数为 **max**,去掉边 a 后的路径数为 **curr**,则边 **a** 对于连接 **sd** 的权重为 **w = (max - curr) / max**

对于所有的 n 个连接，边 **a** 对于整个网络的权重就是：

> (w1 + w2 + ... + wn) / n

对于节点的拓扑权重，就是和它关联的所有边的拓扑权重之和

## 总体效能

于是在计算总体效能的时候，我们就要结合边或者点的拓扑权重，得出总体的效能

### 网络传输效能

> 每条边的打分 * 该边的拓扑权重 之和

### 节点处理效能

> 每个点的打分 * 该点的拓扑权重 之和

## 结构性能

